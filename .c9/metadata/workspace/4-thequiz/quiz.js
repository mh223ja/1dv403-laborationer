{"changed":true,"filter":false,"title":"quiz.js","tooltip":"/4-thequiz/quiz.js","value":"\"use strict\"\n/*global*/\n\nvar Quiz = {\n    //start\n    //question: undefined,\n    //infoURL: \"http://vhost3.lnu.se:20080/question/1\",\n\n    counter: 0,\n    tries: [],\n\n    init: function() {\n        //initiates\n        Quiz.url = \"http://vhost3.lnu.se:20080/question/1\"; //calls first url\n        Quiz.getQuestion(); //runs getQuestion\n        Quiz.renderQuiz(); //runs renderQuiz \n\n    },\n\n\n    renderQuiz: function() {\n\n        //sets up form to display quesitons and to give answers\n        var questionField = document.getElementById(\"questionField\"); //gets area\n        var newDiv = document.createElement(\"div\"); //creates div\n        var newP = document.createElement(\"p\"); //creates p element\n        var input = document.getElementById(\"answerSheet\"); //creates input area\n        input.setAttribute(\"placeholder\", \"Write your answer here: \"); \n       \n        //sets placeholder\n       /* var footer = document.createElement(\"footer\"); //creates footer\n        var triesText = document.createElement(\"p\"); //creates tries text area\n        triesText.innerHTML = \"You have tried to answer this question with \" + Quiz.counter + \" tries\"; //text tries\n        //console.log(triesText);\n        //var question = document.querySelector(\"p\"); \n        var container = document.getElementById(\"container\"); //gets entire container\n        console.log(Quiz.tries.length);*/\n\n\n\n        questionField.appendChild(newDiv); //adds new div to question field\n        newDiv.appendChild(newP); //adds text to new div\n\n        //container.appendChild(footer); //adds footer to container\n        //footer.appendChild(triesText); //adds tries text \n\n        //answerField.appendChild(input);\n\n        //button.addEventListener(\"click\", Quiz.sendAnswer, console.log(\"PUSH!\"));\n\n\n\n\n    },\n\n    getQuestion: function() {\n   /* Quiz.counter++;\n    Quiz.tries.push(Quiz.counter);\n        var footer = document.createElement(\"footer\"); //creates footer\n        var triesText = document.createElement(\"p\"); //creates tries text area\n        footer.appendChild(triesText);\n        console.log(Quiz.counter);\n        console.log(Quiz.tries.length);*/\n        //triesText.innerHTML = \"You have tried to answer this question with \" + Quiz.counter + \" tries\"; \n\n        /* var attempt;\n         console.log(attempt);\n         Quiz.tries.push(attempt);\n         console.log(Quiz.tries.length);*/\n        var answerArea = document.getElementById(\"answerSheet\").innerHTML=\"\";\n        \n\n        //Quiz.renderQuiz.triesText.innerHTML=\"You have tried to answer \" + Quiz.tries.length + \" times\";\n        //var question = document.querySelector(\"p\");\n\n\n        //retriev equestion from server\n        console.log(\"you are here\");\n\n        var xhr = new XMLHttpRequest();\n\n\n\n        xhr.onreadystatechange = function() {\n            console.log(\"1\");\n\n            if (xhr.readyState === 4) {\n\n                if (xhr.status === 200) {\n                    var questionRetrieve = JSON.parse(xhr.responseText);\n                    console.log(xhr.responseText);\n                    var question = questionRetrieve.question;\n                    console.log(question);\n                    var nextUrl = questionRetrieve.nextURL;\n                    console.log(nextUrl);\n\n                    Quiz.postQuestion(question);\n\n\n\n                    // addQuestion(question); // adds question\n                }\n\n                else {\n                    console.log(\"read error, status: \" + xhr.status);\n                }\n                var pushSend = document.getElementById(\"send\");\n                pushSend.onclick = function() {\n                    console.log(pushSend);\n                    Quiz.sendAnswer(nextUrl);\n\n                };\n                var listenArea = document.getElementById(\"answerSheet\");\n                \n                listenArea.onkeydown = function(e){\n                    if (!e){\n                        e = window.event;\n                    }\n                    if(e.keyCode === 13 && !e.shiftKey){\n                        Quiz.sendAnswer(nextUrl);\n                    }\n                };\n                \n            }\n        };\n\n        xhr.open(\"GET\", Quiz.url, true);\n        xhr.send(null);\n\n        /* var pushSend = document.getElementById(\"send\");\n        pushSend.onclick = function(){\n            Quiz.sendAnswer(nextUrl);*/\n\n    },\n\n    postQuestion: function(question) {\n        var postQuestion = document.querySelector(\"p\");\n        var inputClear = document.getElementById(\"answerSheet\");\n        \n\n        postQuestion.innerHTML = question;\n        inputClear.innerHTML = \"\";\n        \n\n    },\n\n    sendAnswer: function(nextUrl) {\n        \n        Quiz.counter++; //adds counter\n        console.log(Quiz.counter);\n        Quiz.tries.push(Quiz.counter);\n        console.log(Quiz.tries);\n        var counterDiv = document.getElementById(\"counter\");\n        counterDiv.innerHTML = \"\";\n        \n        var counterText = document.createElement(\"p\");\n        counterText.innerHTML = \"You have answered \" + Quiz.tries.length + \" times during this quiz\";\n       \n      \n        counterDiv.appendChild(counterText);\n       \n        console.log(Quiz.tries.length);\n   \n\n       \n        console.log(Quiz.triesText);\n        var xhr = new XMLHttpRequest();\n        console.log(\"there\");\n        xhr.open(\"POST\", nextUrl, true);\n        console.log(\"where\");\n        xhr.setRequestHeader(\"content-type\", \"application/json\");\n        console.log(nextUrl);\n\n\n        var answerText = document.getElementById(\"answerSheet\");\n        var finalAnswer = {\n            answer: answerText.value,\n        };\n        console.log(xhr);\n        xhr.addEventListener(\"readystatechange\", function() {\n            console.log(xhr.readyState);\n        }, false);\n        xhr.onreadystatechange = function(e) {\n\n            console.log(xhr.readyState);\n            if (xhr.readyState === 4) {\n                console.log(xhr.status);\n                if (xhr.status === 200) {\n                    var question = JSON.parse(xhr.responseText);\n                    Quiz.url = question.nextURL;\n                    Quiz.clearText();\n                    Quiz.getQuestion(Quiz.url);\n                }\n            }\n        };\n\n        if (xhr.readyState !== 4) {\n            if (xhr.status !== 200) {\n                console.log(\"WRONG!\");\n                var wrongAnswer = document.createElement(\"p\");\n                var answerSheet = document.getElementById(\"answerSheet\");\n                answerSheet.innerHTML = \"\";\n                answerSheet.appendChild(wrongAnswer);\n                wrongAnswer.innerHTML = \"Wrong! Please try again\";\n\n            }\n\n        }\n\n        xhr.send(JSON.stringify(finalAnswer));\n\n\n\n    },\n    \n    clearText: function(){\n        var textArea = document.getElementById(\"answerSheet\");\n        textArea.value = '';\n        \n    }\n};\n\n//wrongAnswer: function() {\n\n//}\n\n\n\n\nwindow.onload = Quiz.init;","undoManager":{"mark":97,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":159,"column":9},"end":{"row":159,"column":10},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":10},"end":{"row":159,"column":11},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":11},"end":{"row":159,"column":12},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":12},"end":{"row":159,"column":13},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":13},"end":{"row":159,"column":14},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":14},"end":{"row":159,"column":15},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":15},"end":{"row":159,"column":16},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":16},"end":{"row":159,"column":17},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":17},"end":{"row":159,"column":18},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":18},"end":{"row":159,"column":19},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":19},"end":{"row":159,"column":20},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":20},"end":{"row":159,"column":21},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":21},"end":{"row":159,"column":22},"action":"insert","lines":["C"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":22},"end":{"row":159,"column":23},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":23},"end":{"row":159,"column":24},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":24},"end":{"row":159,"column":25},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":25},"end":{"row":159,"column":26},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":26},"end":{"row":159,"column":28},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":27},"end":{"row":159,"column":28},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":28},"end":{"row":159,"column":29},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":29},"end":{"row":159,"column":30},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":30},"end":{"row":159,"column":31},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":31},"end":{"row":159,"column":32},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":32},"end":{"row":159,"column":33},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":33},"end":{"row":159,"column":34},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":34},"end":{"row":159,"column":35},"action":"insert","lines":["D"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":35},"end":{"row":159,"column":36},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":36},"end":{"row":159,"column":37},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":38},"end":{"row":159,"column":39},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":39},"end":{"row":160,"column":0},"action":"insert","lines":["",""]},{"start":{"row":160,"column":0},"end":{"row":160,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":8},"end":{"row":160,"column":9},"action":"insert","lines":["C"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":8},"end":{"row":160,"column":9},"action":"remove","lines":["C"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":8},"end":{"row":160,"column":9},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":9},"end":{"row":160,"column":10},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":10},"end":{"row":160,"column":11},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":11},"end":{"row":160,"column":12},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":12},"end":{"row":160,"column":13},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":13},"end":{"row":160,"column":14},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":14},"end":{"row":160,"column":15},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":15},"end":{"row":160,"column":16},"action":"insert","lines":["D"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":16},"end":{"row":160,"column":17},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":17},"end":{"row":160,"column":18},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":18},"end":{"row":160,"column":19},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":19},"end":{"row":160,"column":20},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":20},"end":{"row":160,"column":21},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":21},"end":{"row":160,"column":22},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":22},"end":{"row":160,"column":23},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":23},"end":{"row":160,"column":24},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":24},"end":{"row":160,"column":25},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":25},"end":{"row":160,"column":26},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":26},"end":{"row":160,"column":27},"action":"insert","lines":["C"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":27},"end":{"row":160,"column":28},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":28},"end":{"row":160,"column":29},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":29},"end":{"row":160,"column":30},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":30},"end":{"row":160,"column":31},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":31},"end":{"row":160,"column":32},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":31},"end":{"row":160,"column":32},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":31},"end":{"row":160,"column":33},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":19},"end":{"row":160,"column":20},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":65},"end":{"row":152,"column":66},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":31},"end":{"row":160,"column":32},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":32},"end":{"row":160,"column":33},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":33},"end":{"row":160,"column":34},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":34},"end":{"row":160,"column":35},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":35},"end":{"row":160,"column":36},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":36},"end":{"row":160,"column":37},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":37},"end":{"row":160,"column":38},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":38},"end":{"row":160,"column":39},"action":"insert","lines":["T"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":39},"end":{"row":160,"column":40},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":40},"end":{"row":160,"column":41},"action":"insert","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":41},"end":{"row":160,"column":42},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":43},"end":{"row":160,"column":44},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":59},"end":{"row":152,"column":63},"action":"remove","lines":["ries"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":54},"end":{"row":152,"column":59},"action":"remove","lines":["erOfT"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":51},"end":{"row":152,"column":54},"action":"remove","lines":["umb"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":50},"end":{"row":152,"column":51},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":50},"end":{"row":152,"column":53},"action":"insert","lines":["cou"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":53},"end":{"row":152,"column":57},"action":"insert","lines":["nter"]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":8},"end":{"row":153,"column":33},"action":"remove","lines":["counterDiv.innerHTML =\"\";"]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":4},"end":{"row":153,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":60},"end":{"row":153,"column":4},"action":"remove","lines":["","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":7},"end":{"row":158,"column":39},"action":"remove","lines":[" footer.appendChild(counterDiv);"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":4},"end":{"row":158,"column":7},"action":"remove","lines":["   "]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":55},"end":{"row":158,"column":4},"action":"remove","lines":["","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":6},"end":{"row":157,"column":55},"action":"remove","lines":["  var footer = document.getElementById(\"footer\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":60},"end":{"row":153,"column":8},"action":"insert","lines":["","        "]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":8},"end":{"row":153,"column":10},"action":"insert","lines":["co"]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":10},"end":{"row":153,"column":15},"action":"insert","lines":["unter"]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":15},"end":{"row":153,"column":18},"action":"insert","lines":["Div"]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":18},"end":{"row":153,"column":19},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":18},"end":{"row":153,"column":19},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":18},"end":{"row":153,"column":19},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":19},"end":{"row":153,"column":22},"action":"insert","lines":["inn"]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":22},"end":{"row":153,"column":26},"action":"insert","lines":["erHT"]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":26},"end":{"row":153,"column":28},"action":"insert","lines":["ML"]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":28},"end":{"row":153,"column":30},"action":"insert","lines":[" ="]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":30},"end":{"row":153,"column":33},"action":"insert","lines":[" \"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":33},"end":{"row":153,"column":34},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":160,"column":7},"end":{"row":167,"column":54},"action":"remove","lines":[" //var footerDiv = document.createElement(\"div\");//creates footer","        //var triesText = document.createElement(\"p\"); ","        ","        //footerDiv.value = \"\";","        //triesText.innerHTML = \"\";","        //triesText.innerHTML = \"You have tried to answer this question with \" + Quiz.counter + \" tries\"; //text tries","        //console.log(triesText);","        //var question = document.querySelector(\"p\"); "]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":7},"end":{"row":157,"column":31},"action":"remove","lines":[" //gets entire container"]}]}],[{"group":"doc","deltas":[{"start":{"row":163,"column":0},"end":{"row":165,"column":43},"action":"remove","lines":["        ","        //footer.appendChild(footerDiv);","        //footerDiv.appendChild(triesText);"]}]}]]},"ace":{"folds":[],"scrolltop":2147.600000000003,"scrollleft":0,"selection":{"start":{"row":159,"column":44},"end":{"row":159,"column":44},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":142,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1420750254524}